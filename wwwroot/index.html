<script>
    var myFunction = function(username) {
        return new Promise((resolve, reject) => {
            setTimeout(function() {
                resolve(username + "'s promise is resolved");
            }, 3000);
        });
    };

    myFunction("Ella")
    .then(successMessage => {console.log(successMessage);})
    .then(() => myFunction("Fiona"))
    .then(successMessage => {console.log(successMessage);})
    .then(() => myFunction("Harold"))
    .then(successMessage => {console.log(successMessage);})
    .catch(errorMessage => {console.log("Error: "+errorMessage);})

    console.log("Hi");
    console.log("How are you?");

    myFunction("Gary")
    .then(successMessage => {console.log(successMessage);})
    .catch(errorMessage => {console.log("Error: "+errorMessage);})

    console.log("How is your day?")

    var setBackgroundColor = function() {
        console.log("Starting the background color change...");
        
        fetch("http://localhost:5162/decorations/bgcolor/a")
        .then(response => response.text())
        .then(text => {
            document.getElementById("stage").style.backgroundColor = text;
            console.log("Completed background change.");
        })
        .catch(error => {
            console.error("Error fetching background color:", error);
        });
    }

    async function setBackgroundColorAsync() {
        console.log("Starting the background color change...");
        let response = await fetch("http://localhost:5162/decorations/bgcolor/a")
        let text = await response.text();
        document.getElementById("stage").style.backgroundColor=text;
        console.log("Completed background change...")
    }   

    var setBorder = function() {
        console.log("Starting the border color change...");
        
        fetch("http://localhost:5162/decorations/border/a")
        .then(response => response.text())
        .then(text => {
            document.getElementById("stage").style.border = text;
            console.log("Completed border change.");
        })
        .catch(error => {
            console.error("Error fetching border color:", error);
        });
    }

    async function changeTextColor() {
        console.log("Starting the text color change (async)...");

        try {
            // Simulating a server delay of 3 seconds
            await new Promise(resolve => setTimeout(resolve, 3000));

            // Fetching the color from the server
            let response = await fetch("http://localhost:5162/decorations/text/a");
            let color = await response.text();

            // Changing the text color
            document.getElementById("stage").style.color = color;

            console.log("Completed text color change (async).");
        } catch (error) {
            console.error("Error fetching text color:", error);
        }
    }

</script>

<h2 id="stage"> Welcome! </h2>
<p><button onclick="changeTextColor()">Change Text Color</button></p>
<p><button onclick="setBackgroundColorAsync()">Click to decorate with  background color</button></p>
<p><button onclick="setBorder()">Click to decorate border</button></p>